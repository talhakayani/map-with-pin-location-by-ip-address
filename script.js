const axios = require('axios');
const fs = require('fs');

const ipAddresses = [
  '72.255.1.60',
  '192.168.1.1',
  '39.62.22.202',
  '103.73.101.36',
  '103.73.101.37',
  '1.2.3.4',
  '1.2.3.9',
  '103.73.101.37',
  '104.207.138.137',
  '45.32.92.102',
  '45.77.111.196',
  '65.20.78.199',
  '64.176.187.144',
  '207.246.117.28',
  '39.62.5.88',
  '137.220.34.71',
  '5.161.87.206',
  '5.78.67.36',
  '45.32.197.12',
  '45.32.128.161',
  '149.28.37.210',
  '155.138.197.81',
  '216.128.178.114',
  '45.77.76.217',
  '64.176.186.180',
  '67.219.99.6',
  '64.176.4.183',
  '208.85.19.142',
  '104.156.244.238',
  '207.246.116.123',
  '208.83.236.172',
  '139.84.226.125',
  '217.69.5.159',
  '5.161.107.207',
  '39.62.5.85',
  '45.32.224.210',
  '139.84.197.110',
  '39.62.5.84',
  '167.179.90.192',
  '95.179.130.109',
  '139.180.146.28',
  '39.62.5.80',
  '64.176.191.94',
  '45.77.208.251',
  '38.242.195.102',
  '45.77.209.105',
  '208.83.238.7',
  '45.63.76.149',
  '104.156.230.145',
  '149.28.221.143',
  '137.220.35.208',
  '155.138.244.19',
  '155.138.236.20',
  '45.77.161.202',
  '144.202.4.145',
  '147.182.173.4',
  '78.141.203.208',
  '217.69.9.222',
  '45.77.86.147',
  '173.199.122.111',
  '192.248.164.172',
  '38.242.196.88',
  '66.42.75.161',
  '38.242.204.37',
  '64.176.185.162',
  '185.228.137.207',
  '65.20.115.88',
  '155.138.244.207',
  '216.238.66.34',
  '45.76.237.242',
  '144.202.44.170',
  '78.141.202.87',
  '95.217.69.146',
  '108.61.188.144',
  '155.138.161.211',
  '188.68.38.192',
  '144.91.102.168',
  '108.61.84.31',
  '66.42.79.47',
  '149.102.153.238',
  '67.219.103.19',
  '154.38.169.120',
  '154.38.170.69',
  '154.38.170.67',
  '154.38.170.66',
  '154.38.170.70',
  '154.38.170.68',
  '158.220.114.140',
  '158.220.114.27',
  '198.13.56.105',
  '66.42.103.198',
  '139.84.194.107',
  '158.220.117.24',
  '67.219.102.148',
  '67.219.111.139',
  '139.84.196.83',
  '67.219.101.63',
  '67.219.105.83',
  '95.179.189.37',
  '45.77.161.122',
  '149.28.46.130',
  '173.212.209.131',
  '81.0.218.13',
  '104.156.231.195',
  '45.76.241.138',
  '155.138.253.151',
  '104.156.229.217',
  '137.220.51.153',
  '144.202.21.161',
  '140.82.2.171',
  '216.128.147.227',
  '154.38.188.128',
  '46.250.240.42',
  '144.91.90.26',
  '46.250.240.212',
  '46.250.240.213',
  '81.0.218.7',
  '192.248.159.31',
];

async function generatJSONArray() {
  fs.writeFileSync('./dataset.json', JSON.stringify([]));
  for (const ip of ipAddresses) {
    console.log('ip', ip);
    // setTimeout(async () => {
    try {
      const response = await axios.get(`https://ipinfo.io/${ip}/json`);
      console.log(
        'file: script.js:131 ~ setTimeout ~ response:',
        response?.data
      );
      const fileContent = fs.readFileSync('./dataset.json');
      fs.writeFileSync(
        './dataset.json',
        JSON.stringify([...(JSON.parse(fileContent) || []), response.data])
      );
    } catch (err) {
      console.log('file: script.js:128 ~ setTimeout ~ err:', err?.message);
    }
    // }, 10000);
  }
}

generatJSONArray();
